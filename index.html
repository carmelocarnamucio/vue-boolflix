<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&display=swap">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <title>Boolfix</title>
</head>
<body>

  <div id="app">
    <!-- Search bar -->
    <header class="search-bar">
      <a href="./index.html" class="logo">BOOLFIX</a>
      <input class="search-input"type="text" placeholder="Cerca"
             v-model="searchInput"
             @keyup.enter="search">
    </header>

    <main class="show-results">

      <!-- Home Page -->
      <!-- First block -->
      <div class=""  v-if="pagesearch === '0'">
        <p class="welcome">Non sai cosa guardare? Ecco qualche consiglio</p>
        <h1 class="sectionHome"> {{queryHome1}} </h1>
        <div class="movies-sectionHome">
          <ul class="moviesHome list">
            <li class="movieHome" v-for="movie in moviesHome1" @click="showOverlay">
              <div class="poster">
                <img :src="setPosterPath(movie.poster_path)"
                     :alt="movie.title"
                     v-if="movie.poster_path">
                <img src="img/poster.png"
                     alt="copertina Film non trovata"
                     v-else>
              </div>
              <div class="vote">
                <span class="overflow description-title">Voto:</span>
                <i class="fas fa-star"
                   v-for="n in starRating(movie.vote_average)"></i>
                <i class="far fa-star"
                   v-for="n in (5 - starRating(movie.vote_average))"></i>
              </div>
              <div class="descriptionHome">
                <span class="overflow description-title">Titolo:</span>
                <p class="">{{ movie.title }}</p>
                <span class="overflow description-title">Titolo Originale:</span>
                <p class="">{{ movie.original_title }}</p>
                <div class="languageHome">
                  <span class="overflow description-title">Lingua:</span>
                  <img :src="'img/' + movie.original_language + '.svg' " alt="">
                </div>
                <span class="description-overview"v-if="movie.overview === '' ">Descrizione non disponibile</span>
                <p class="overflow description-title" v-else>{{movie.overview}}</p>
                <div class="description" v-if="movie.overview">
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <!-- Second block-->
      <div class=""  v-if="pagesearch === '0'">
        <h1 class="sectionHome"> {{queryHome2}} </h1>
        <div class="movies-sectionHome">
          <ul class="moviesHome list">
            <li class="movieHome" v-for="movie in moviesHome2" @click="showOverlay">
              <div class="poster">
                <img :src="setPosterPath(movie.poster_path)"
                     :alt="movie.title"
                     v-if="movie.poster_path">
                <img src="img/poster.png"
                     alt="copertina Film non trovata"
                     v-else>
              </div>
              <div class="vote">
                <span class="overflow description-title">Voto:</span>
                <i class="fas fa-star"
                    v-for="n in starRating(movie.vote_average)"></i>
                <i class="far fa-star"
                   v-for="n in (5 - starRating(movie.vote_average))"></i>
              </div>
              <div class="descriptionHome">
                <span class="overflow description-title">Titolo:</span>
                <p class="">{{ movie.title }}</p>
                <span class="overflow description-title">Titolo Originale:</span>
                <p class="">{{ movie.original_title }}</p>
                <div class="languageHome">
                  <span class="overflow description-title">Lingua:</span>
                  <img :src="'img/' + movie.original_language + '.svg' " alt="">
                </div>
                <span class="description-overview" v-if="movie.overview === '' ">Descrizione non disponibile</span>
                <p class="overflow description-title" v-else>{{movie.overview}}</p>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <!-- Results Movies -->
      <div class="movies-section" v-if= "pagesearch != '0'">
        <div class="found"v-if="query != ''">
            Risultati per:
             "<p> {{query.toUpperCase()}} </p>"
          </div>
        <h2> Film </h2>
        <div class="notfound" v-if="movies.length === 0" >
          <h1>La ricerca non ha dato nessun risultato</h1>
        </div>
        <ul class="movies list">
          <li class="movie" v-for="movie in movies" @click="showOverlay">
            <div class="poster">
              <img :src="setPosterPath(movie.poster_path)"
                  :alt="movie.title"
                  v-if="movie.poster_path">
              <img src="img/poster.png"
                  alt="copertina Film non trovata"
                  v-else>
            </div>
            <div class="vote">
              <span class="description-title">Voto:</span>
              <i class="fas fa-star"
                 v-for="n in starRating(movie.vote_average)"></i>
              <i class="far fa-star"
                 v-for="n in (5 - starRating(movie.vote_average))"></i>
            </div>
            <div class="description">
              <span class="description-title">Titolo:</span>
              <p class="">{{ movie.title }}</p>
              <span class="description-title">Titolo Originale:</span>
              <p class="">{{ movie.original_title }}</p>
              <span class="description-title">Lingua:</span>
              <div class="language">
                <img :src="'img/' + movie.original_language + '.svg' " alt="">
              </div>
              <span class="description-overview"v-if="movie.overview === '' ">Trama non disponibile</span>
              <p class="overflow" v-else>{{movie.overview}}</p>

            </div>
          </li>
        </ul>
      </div>
      <!-- Results Series -->
      <div class="series-section" v-if= "pagesearch != '0'">
        <h2> Serie Tv </h2>
        <div class="notfound" v-if="series.length === 0" >
          <h1>La ricerca non ha dato nessun risultato</h1>
        </div>
        <ul class="series list">
          <li class="serie" v-for="serie in series" @click="showOverlay">
            <div class="poster">
              <img :src="setPosterPath(serie.poster_path)"
                   :alt="serie.title"
                   v-if="serie.poster_path">
              <img src="img/poster.png"
                   alt="copertina Serie Tv non trovata"
                   v-else>
            </div>
            <div class="vote">
              <span class="description-title">Voto:</span>
              <i class="fas fa-star"
                 v-for="n in starRating(serie.vote_average)"></i>
              <i class="far fa-star"
                 v-for="n in (5 - starRating(serie.vote_average))"></i>
            </div>
            <div class="description">
              <span class="description-title">Titolo:</span>
              <p class="">{{ serie.name}}</p>
              <span class="description-title">Titolo Originale:</span>
              <p class="">{{ serie.original_name }}</p>
              <div class="language">
                <span class="description-title">Lingua:</span>
                <img :src="'img/' + serie.original_language + '.svg' " alt="">
              </div>
              <span class="description-overview" v-if="serie.overview === '' ">Trama non disponibile</span>
              <p class="overflow" v-else>{{serie.overview}}</p>
            </div>
          </li>
        </ul>
      </div>
    </main>

    <!-- window containing a more accurate description -->
    <div class="description-overlay" v-if="overlayStatus" @click="overlayStatus = false">
      <div class="description-full-screen">
        <div class="img-wrapper">
          <img :src="`https://image.tmdb.org/t/p/w342${overlay.poster_path}`"
              alt=""
              v-if="overlay.poster_path">
          <img src="img/poster.png"
          alt="poster not found"
          v-else>
        </div>
      </div>
    </div>
  </div>

  <script src="./js/script.js"></script>
</body>
</html>
